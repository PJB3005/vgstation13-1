NanoTemplate.preloadTemplate("atmos_control.tmpl", "<!--\nTitle: Atmos Control UI\nUsed In File(s): /code/game/machinery/alarm.dm\n-->\n<!--\n#define AALARM_MODE_SCRUBBING\t1\n#define AALARM_MODE_REPLACEMENT\t2 //like scrubbing, but faster.\n#define AALARM_MODE_PANIC\t\t3 //constantly sucks all air\n#define AALARM_MODE_CYCLE\t\t4 //sucks out all air, then refill and switches to scrubbing\n#define AALARM_MODE_FILL\t\t5 //emergency fill\n#define AALARM_MODE_OFF\t\t\t6 //Shuts it all down.\n\n#define AALARM_SCREEN_MAIN\t\t1\n#define AALARM_SCREEN_VENT\t\t2\n#define AALARM_SCREEN_SCRUB\t\t3\n#define AALARM_SCREEN_MODE\t\t4\n#define AALARM_SCREEN_SENSORS\t5\n-->\n{{if !data.logged_in}}\n\t<div class=\"line\">\n\t\t{{:helper.link(\'Log in\', \'unlocked\', {\'login\': 1})}}\n\t</div>\n{{else}}\n\t<div class=\"line\">\n\t\tLogged in as: <b>{{:data.login_name}}</b> {{:helper.link(\'Log out\', \'locked\', {\'logout\': 1}, (data.emagged) ? \'disabled\' : null)}}\n\t</div>\n\t<!-- Presets panel. -->\n\t{{if data.aca_screen == \"2\"}}\n\t\t<div class=\"line\">\n\t\t\t{{:helper.link(\'Show Tracker Map\', \'pin-s\', {\'reset\': 1, \'showMap\' : 1})}}\n\t\t\t{{:helper.link(\'Show Detail List\', \'script\', {\'set_screen\': 1})}}\n\t\t</div>\n\n\t\t<div class=\"line\">\n\t\t\t<h3>System Presets</h3>\n\t\t</div>\n\t\t<div class=\"statusDisplay\">\n\t\t\t{{for data.presets}}\n\t\t\t\t<div class=\"line\">\n\t\t\t\t\t<div class=\"statusLabel\">{{:helper.link(value.name, null, {\'select_preset\': value.name}, (value.name == data.selected_preset_name) ? \'selected\' : null)}}</div>\n\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t{{:value.desc}}\n\t\t\t\t\t</div>\n\n\t\t\t\t</div>\n\t\t\t{{/for}}\n\t\t\t<div class=\"line\">\n\t\t\t\t<div class=\"statusLabel\">\n\t\t\t\t\t{{:helper.link(\"Add New\", \"plus\", {\"add_preset\": 1})}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t{{if data.selected_preset}}\n\t\t\t<div class=\"line\">\n\t\t\t\t<h3>Preset Settings</h3>\n\t\t\t</div>\n\t\t\t<div class=\"line\">\n\t\t\t\t<b><span class=\"red\">Remember to save your changes!</span></b>\n\t\t\t</div>\n\t\t\t<div class=\"statusDisplay\">\n\t\t\t\t<table>\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<th>&nbsp;</th>\n\t\t\t\t\t\t<th class=\"bad\">min2</th>\n\t\t\t\t\t\t<th class=\"average\">min1</th>\n\t\t\t\t\t\t<th class=\"average\">max1</th>\n\t\t\t\t\t\t<th class=\"bad\">max2</th>\n\t\t\t\t\t</thead>\n\t\t\t\t\t<tbody>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>O<sub>2</sub></th>\n\t\t\t\t\t\t\t{{for data.selected_preset.oxygen}}\n\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'set_preset_setting\':\'oxygen\',\'index\':index+1})}}</td>\n\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>N<sub>2</sub></th>\n\t\t\t\t\t\t\t{{for data.selected_preset.nitrogen}}\n\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'set_preset_setting\':\'nitrogen\',\'index\':index+1})}}</td>\n\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>CO<sub>2</sub></th>\n\t\t\t\t\t\t\t{{for data.selected_preset.carbon_dioxide}}\n\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'set_preset_setting\':\'carbon_dioxide\',\'index\':index+1})}}</td>\n\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Plasma</th>\n\t\t\t\t\t\t\t{{for data.selected_preset.plasma}}\n\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'set_preset_setting\':\'plasma\',\'index\':index+1})}}</td>\n\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Nitrous Oxide</th>\n\t\t\t\t\t\t\t{{for data.selected_preset.n2o}}\n\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'set_preset_setting\':\'n2o\',\'index\':index+1})}}</td>\n\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Trace Gases</th>\n\t\t\t\t\t\t\t{{for data.selected_preset.other}}\n\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'set_preset_setting\':\'other\',\'index\':index+1})}}</td>\n\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Pressure</th>\n\t\t\t\t\t\t\t{{for data.selected_preset.pressure}}\n\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'set_preset_setting\':\'pressure\',\'index\':index+1})}}</td>\n\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<th>Temperature (K)</th>\n\t\t\t\t\t\t\t{{for data.selected_preset.temperature}}\n\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'set_preset_setting\':\'temperature\',\'index\':index+1})}}</td>\n\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</tbody>\n\t\t\t\t</table>\n\t\t\t\t<div class=\"line\">\n\t\t\t\t\t<div class=\"statusLabel\">Target temperature:</div>\n\t\t\t\t\t<div class=\"statusValue\">{{:helper.link((helper.precisionRound(data.selected_preset.target_temperature - 273.15, 4))+\" C\", \'carat-2-n-s\', {\'set_preset_setting\': \'target_temperature\'})}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"line\">\n\t\t\t\t\t<div class=\"statusLabel\">Scrubbed gases:</div>\n\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t{{:helper.link(\'CO<sub>2</sub>\', null, {\'set_preset_setting\': \'scrubbers_gases\', \'gas\': \'carbon_dioxide\'}, null, (data.selected_preset.scrubbers_gases.carbon_dioxide?\'linkOn\':\'\'))}}\n\t\t\t\t\t\t{{:helper.link(\'Plasma\', null, {\'set_preset_setting\': \'scrubbers_gases\', \'gas\': \'plasma\'}, null, (data.selected_preset.scrubbers_gases.plasma?\'linkOn\':\'\'))}}\n\t\t\t\t\t\t{{:helper.link(\'N<sub>2</sub>O\', null, {\'set_preset_setting\': \'scrubbers_gases\', \'gas\': \'n2o\'}, null, (data.selected_preset.scrubbers_gases.n2o?\'linkOn\':\'\'))}}\n\t\t\t\t\t\t{{:helper.link(\'N<sub>2</sub>\', null, {\'set_preset_setting\': \'scrubbers_gases\', \'gas\': \'nitrogen\'}, null, (data.selected_preset.scrubbers_gases.nitrogen?\'linkOn\':\'\'))}}\n\t\t\t\t\t\t{{:helper.link(\'O<sub>2</sub>\', null, {\'set_preset_setting\': \'scrubbers_gases\', \'gas\': \'oxygen\'}, null, (data.selected_preset.scrubbers_gases.oxygen?\'linkOn\':\'\'))}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"line\">\n\t\t\t\t{{:helper.link(\'Save\', \'disk\', {\'save_preset_setting\': 1})}}\n\t\t\t\t{{if data.selected_preset.core}}\n\t\t\t\t\t{{:helper.link(\'Reset\', \'arrowreturn-1-w\', {\'reset_preset\' : 1})}}\n\t\t\t\t{{else}}\n\t\t\t\t\t{{:helper.link(\'Edit Name/Desc.\', \'gear\', {\'rename_preset\': 1})}}\n\t\t\t\t\t{{:helper.link(\'Delete\', \'trash\', {\'delete_preset\': 1})}}\n\t\t\t\t{{/if}}\n\t\t\t\t{{if data.admin_access}}\n\t\t\t\t\t{{:helper.link(\'Batch Apply\', \'arrowthick-1-n\', {\'apply_preset_batch\': 1})}}\n\t\t\t\t{{/if}}\n\t\t\t</div>\n\t\t{{/if}}\n\t<!-- Detail list. -->\n\t{{else data.aca_screen == \"1\"}}\n\t\t<div class=\"line\">\n\t\t\t{{:helper.link(\'Show Tracker Map\', \'pin-s\', {\'reset\': 1, \'showMap\' : 1})}}\n\t\t\t{{if data.admin_access}}\n\t\t\t\t{{:helper.link(\'Show Presets Panel\', \'gear\', {\'set_screen\': 2})}}\n\t\t\t{{/if}}\n\t\t</div>\n\t\t{{if !data.alarm}}\n\t\t\t<h3>Atmospherics Control</h3>\n\t\t\t<div class=\"statusDisplay\">\n\t\t\t{{for data.alarms}}\n\t\t\t\t<div class=\"line\">\n\t\t\t\t\t{{:helper.string(\"<div class=\'statusValue {0}\'>{1}</div>\",helper.dangerToClass(value.danger),value.name)}}\n\t\t\t\t\t{{:helper.link(\"Access\",\"gear\",{\"alarm\":value.ID},null,\"floatRight\")}}\n\t\t\t\t</div>\n\t\t\t{{/for}}\n\t\t\t</div>\n\t\t{{else}}\n\t\t\t{{:helper.link(\"Main Menu\",\"gear\",{\"reset\":1},null,null)}}\n\n\t\t\t<!-- The markup below is a direct copy of air_alarm.tmpl -->\n\t\t\t<h3>{{:data.name}}</h3>\n\t\t\t{{if !data.air}}\n\t\t\t\t<div class=\"notice\">Unable to acquire air sample.</div>\n\t\t\t{{else}}\n\t\t\t\t<div class=\"statusDisplay\">\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t<div class=\"statusLabel\">Pressure:</div>\n\t\t\t\t\t\t{{:helper.string(\"<div class=\'statusValue {0}\'>{1} kPa</div>\",helper.dangerToClass(data.air.danger.pressure),helper.precisionRound(data.air.pressure,4))}}\n\t\t\t\t\t\t<div class=\"statusValue\" style=\"margin-left:5px;\">\n\t\t\t\t\t\t{{if !data.locked && data.rcon_enabled}}\n\t\t\t\t\t\t\t{{if data.mode == 3}}\n\t\t\t\t\t\t\t\t{{:helper.link(\"DEACTIVATE PANIC SYPHON\",null,{\"mode\" : 1},null,\'linkOn\')}}\n\t\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t\t{{:helper.link(\"ACTIVATE PANIC SYPHON\",null,{\"mode\" : 3},null,\'red\')}}\n\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t<div class=\"statusLabel\">Oxygen:</div>\n\t\t\t\t\t\t{{:helper.displayBar(data.air.contents.oxygen, 0, 100, helper.dangerToClass(data.air.danger.oxygen))}}\n\t\t\t\t\t\t{{:helper.string(\"<div class=\'statusValue {0}\'>{1}%</div>\",helper.dangerToClass(data.air.danger.oxygen),helper.precisionRound(data.air.contents.oxygen,2))}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t<div class=\"statusLabel\">Nitrogen:</div>\n\t\t\t\t\t\t{{:helper.displayBar(data.air.contents.nitrogen, 0, 100, helper.dangerToClass(data.air.danger.nitrogen))}}\n\t\t\t\t\t\t{{:helper.string(\"<div class=\'statusValue {0}\'>{1}%</div>\",helper.dangerToClass(data.air.danger.nitrogen),helper.precisionRound(data.air.contents.nitrogen,2))}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t<div class=\"statusLabel\">Carbon Dioxide:</div>\n\t\t\t\t\t\t{{:helper.displayBar(data.air.contents.co2, 0, 100, helper.dangerToClass(data.air.danger.co2))}}\n\t\t\t\t\t\t{{:helper.string(\"<div class=\'statusValue {0}\'>{1}%</div>\",helper.dangerToClass(data.air.danger.co2),helper.precisionRound(data.air.contents.co2,2))}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t<div class=\"statusLabel\">Plasma:</div>\n\t\t\t\t\t\t{{:helper.displayBar(data.air.contents.plasma, 0, 100, helper.dangerToClass(data.air.danger.plasma))}}\n\t\t\t\t\t\t{{:helper.string(\"<div class=\'statusValue {0}\'>{1}%</div>\",helper.dangerToClass(data.air.danger.plasma),helper.precisionRound(data.air.contents.plasma,2))}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t<div class=\"statusLabel\">Nitrous Oxide:</div>\n\t\t\t\t\t\t{{:helper.displayBar(data.air.contents.n2o, 0, 100, helper.dangerToClass(data.air.danger.n2o))}}\n\t\t\t\t\t\t{{:helper.string(\"<div class=\'statusValue {0}\'>{1}%</div>\",helper.dangerToClass(data.air.danger.n2o),helper.precisionRound(data.air.contents.n2o,2))}}\n\t\t\t\t\t</div>\n\t\t\t\t\t{{if data.air.danger.other>0}}\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t<div class=\"statusLabel\">Other:</div>\n\t\t\t\t\t\t{{:helper.displayBar(data.air.contents.other, 0, 100, helper.dangerToClass(data.air.danger.other))}}\n\t\t\t\t\t\t{{:helper.string(\"<div class=\'statusValue {0}\'>{1}%</div>\",helper.dangerToClass(data.air.danger.other),helper.precisionRound(data.air.contents.other,2))}}\n\t\t\t\t\t</div>\n\t\t\t\t\t{{/if}}\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t<div class=\"statusLabel\">\n\t\t\t\t\t\t\tTemperature:\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{:helper.string(\"<div class=\'statusValue {0}\'>{1}K ({2}&deg;C)</div>\",helper.dangerToClass(data.air.danger.temperature),helper.precisionRound(data.air.temperature,2),helper.precisionRound(data.air.temperature_c,2))}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t<div class=\"statusLabel\">Local Status:</div>\n\t\t\t\t\t\t{{if data.air.danger.overall == 0}}\n\t\t\t\t\t\t\t{{if data.atmos_alarm}}\n\t\t\t\t\t\t\t\t<div class=\"average\">Caution: Atmos alert in area</div>\n\t\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t\t<div class=\"good\">Optimal</div>\n\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t{{else data.air.danger.overall == 1}}\n\t\t\t\t\t\t\t<div class=\"average\">Caution</div>\n\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t<div class=\"notice\">DANGER: Internals Required</div>\n\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t{{if !data.locked && data.rcon_enabled}}\n\t\t\t\t\t\t\t{{if data.alarmActivated}}\n\t\t\t\t\t\t\t\t{{:helper.link(\'Reset Alarm\',null,{\'atmos_reset\':1},null,\'linkOn\')}}\n\t\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t\t{{:helper.link(\'Activate Alarm\',null,{\'atmos_alarm\':1},null,\'red\')}}\n\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t\t{{if data.firedoor_override}}\n\t\t\t\t\t\t\t\t{{:helper.link(\'Manual override enabled\', null, {\'disable_override\':1}, \'disabled\', \'linkOn\')}}\n\t\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t\t{{:helper.link(\'Manual override disabled\', null, {\'enable_override\':1}, \'disabled\', \'red\')}}\n\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t<!--\n\t\t\t\t\t\t#define RCON_NO\t\t1\n\t\t\t\t\t\t#define RCON_AUTO\t2\n\t\t\t\t\t\t#define RCON_YES\t3\n\t\t\t\t\t\t-->\n\t\t\t\t\t\t<div class=\"statusLabel\">Remote Control:</div>\n\t\t\t\t\t\t{{if data.rcon_enabled}}\n\t\t\t\t\t\t\t<div class=\"good\">Enabled</div>\n\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t<div class=\"bad\">Disabled</div>\n\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t<div class=\"statusLabel\">Thermostat:</div>\n\t\t\t\t\t\t{{:helper.link(data.target_temp+\" C\", \'carat-2-n-s\', {\'temperature\': 1}, (data.rcon_enabled) ? null : \'disabled\')}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{{/if}}\n\t\t\t{{if !data.rcon_enabled}}\n\t\t\t\t<div class=\"notice\">Remote control disabled.</div>\n\t\t\t{{else}}\n\t\t\t\t<div class=\"item\">\n\t\t\t\t\t<div class=\"itemLabel\">Screen:</div>\n\t\t\t\t\t<div class=\"itemContents\">\n\t\t\t\t\t\t{{:helper.link(\'Main\',      \'gear\',{\'screen\':1},(data.screen==1)?\'linkOn\':\'\')}}\n\t\t\t\t\t\t{{:helper.link(\'Vents\',     \'gear\',{\'screen\':2},(data.screen==2)?\'linkOn\':\'\')}}\n\t\t\t\t\t\t{{:helper.link(\'Scrubbers\', \'gear\',{\'screen\':3},(data.screen==3)?\'linkOn\':\'\')}}\n\t\t\t\t\t\t{{:helper.link(\'Mode\',      \'gear\',{\'screen\':4},(data.screen==4)?\'linkOn\':\'\')}}\n\t\t\t\t\t\t{{:helper.link(\'Thresholds\',\'gear\',{\'screen\':5},(data.screen==5)?\'linkOn\':\'\')}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!-- VENTS -->\n\t\t\t\t{{if data.screen == 2}}\n\t\t\t\t\t<h3>Vent Pump Settings</h3>\n\t\t\t\t\t{{for data.vents}}\n\t\t\t\t\t\t<div class=\"statusDisplay\">\n\t\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t\t<b>{{>value.name}}:</b>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t\t<div class=\"statusLabelWide\">Operating:</div>\n\t\t\t\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t\t\t\t{{:helper.link(value.power ? \'On\':\'Off\',\'power\',{\'id_tag\':value.id_tag,\'command\':\'power\',\'val\':value.power?0:1},null,(value.power?\'linkOn\':\'red\'))}}\n\t\t\t\t\t\t\t\t\t{{if value.direction==0}}\n\t\t\t\t\t\t\t\t\t\t{{:helper.link(\'Siphoning\',\'arrowthickstop-1-s\',{\'id_tag\':value.id_tag,\'command\':\'direction\',\'val\':\'1\'})}}\n\t\t\t\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t\t\t\t{{:helper.link(\'Blowing\',\'arrowthick-1-n\',{\'id_tag\':value.id_tag,\'command\':\'direction\',\'val\':\'0\'})}}\n\t\t\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t\t<div class=\"statusLabelWide\">Pressure checks:</div>\n\t\t\t\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t\t\t\t{{:helper.link(\'External\',\'power\',{\'id_tag\':value.id_tag,\'command\':\'checks\',\'val\':helper.xor(value.checks,1)},null,(value.checks & 1 ?\'linkOn\':\'red\'))}}\n\t\t\t\t\t\t\t\t\t{{:helper.link(\'Internal\',\'power\',{\'id_tag\':value.id_tag,\'command\':\'checks\',\'val\':helper.xor(value.checks,2)},null,(value.checks & 2 ?\'linkOn\':\'red\'))}}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t\t<div class=\"statusLabelWide\">External pressure target:</div>\n\t\t\t\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t\t\t\t{{:helper.precisionRound(value.external,4)}} kPa\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{{:helper.link(\'Set\',\'gear\',{\'id_tag\':value.id_tag,\'command\':\'set_external_pressure\'})}}\n\t\t\t\t\t\t\t\t{{:helper.link(\'Reset\',\'arrowrefresh-1-n\',{\'id_tag\':value.id_tag,\'command\':\'set_external_pressure\',\'val\':101.325},null,\'linkOn\')}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t\t<div class=\"statusLabelWide\">Internal pressure target:</div>\n\t\t\t\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t\t\t\t{{:helper.precisionRound(value.internal,4)}} kPa\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{{:helper.link(\'Set\',\'gear\',{\'id_tag\':value.id_tag,\'command\':\'set_internal_pressure\'})}}\n\t\t\t\t\t\t\t\t{{:helper.link(\'Reset\',\'arrowrefresh-1-n\',{\'id_tag\':value.id_tag,\'command\':\'set_internal_pressure\',\'val\':0},null,\'linkOn\')}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{empty}}\n\t\t\t\t\t\t<i>No vent pumps located in this area.</i>\n\t\t\t\t\t{{/for}}\n\t\t\t\t<!-- SCRUBBERS -->\n\t\t\t\t{{else data.screen == 3}}\n\t\t\t\t\t<h3>Scrubbers</h3>\n\t\t\t\t\t{{for data.scrubbers}}\n\t\t\t\t\t\t<div class=\"statusDisplay\">\n\t\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t\t<b>{{>value.name}}:</b>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t\t<div class=\"statusLabel\">Operating:</div>\n\t\t\t\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t\t\t\t{{:helper.link(value.power ? \'On\':\'Off\',\'power\',{\'id_tag\':value.id_tag,\'command\':\'power\',\'val\':value.power?0:1},null,(value.power?\'linkOn\':\'red\'))}}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t\t<div class=\"statusLabel\">Type:</div>\n\t\t\t\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t\t\t\t{{if value.scrubbing==0}}\n\t\t\t\t\t\t\t\t\t\t{{:helper.link(\'Siphoning\',\'arrowthickstop-1-s\',{\'id_tag\':value.id_tag,\'command\':\'scrubbing\',\'val\':1},null,\'red\')}}\n\t\t\t\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t\t\t\t{{:helper.link(\'Scrubbing\',\'transferthick-e-w\',{\'id_tag\':value.id_tag,\'command\':\'scrubbing\',\'val\':0},null,\'linkOn\')}}\n\t\t\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{{if value.scrubbing==1}}\n\t\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t\t<div class=\"statusLabel\">Filtering:</div>\n\t\t\t\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t\t\t\t{{:helper.link(\'CO<sub>2</sub>\',null,{\'id_tag\':value.id_tag,\'command\':\'co2_scrub\',\'val\':(value.filter_co2==0?1:0)},null,(value.filter_co2?\'linkOn\':\'\'))}}\n\t\t\t\t\t\t\t\t\t{{:helper.link(\'Plasma\',        null,{\'id_tag\':value.id_tag,\'command\':\'tox_scrub\',\'val\':(value.filter_tox==0?1:0)},null,(value.filter_tox?\'linkOn\':\'\'))}}\n\t\t\t\t\t\t\t\t\t{{:helper.link(\'N<sub>2</sub>O\',null,{\'id_tag\':value.id_tag,\'command\':\'n2o_scrub\',\'val\':(value.filter_n2o==0?1:0)},null,(value.filter_n2o?\'linkOn\':\'\'))}}\n\t\t\t\t\t\t\t\t\t{{:helper.link(\'N<sub>2</sub>\', null,{\'id_tag\':value.id_tag,\'command\':\'n2_scrub\', \'val\':(value.filter_n2 ==0?1:0)},null,(value.filter_n2 ?\'linkOn\':\'\'))}}\n\t\t\t\t\t\t\t\t\t{{:helper.link(\'O<sub>2</sub>\', null,{\'id_tag\':value.id_tag,\'command\':\'o2_scrub\', \'val\':(value.filter_o2 ==0?1:0)},null,(value.filter_o2 ?\'linkOn\':\'\'))}}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t\t<div class=\"statusLabelWide\">Pressure checks:</div>\n\t\t\t\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t\t\t\t{{:helper.link(\'External\',\'power\',{\'id_tag\':value.id_tag,\'command\':\'checks\',\'val\':helper.xor(value.checks,1)},null,(value.checks & 1 ?\'linkOn\':\'red\'))}}\n\t\t\t\t\t\t\t\t\t{{:helper.link(\'Internal\',\'power\',{\'id_tag\':value.id_tag,\'command\':\'checks\',\'val\':helper.xor(value.checks,2)},null,(value.checks & 2 ?\'linkOn\':\'red\'))}}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t\t<div class=\"statusLabelWide\">External pressure target:</div>\n\t\t\t\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t\t\t\t{{:helper.precisionRound(value.external,4)}} kPa\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{{:helper.link(\'Set\',\'gear\',{\'id_tag\':value.id_tag,\'command\':\'set_external_pressure\'})}}\n\t\t\t\t\t\t\t\t{{:helper.link(\'Reset\',\'arrowrefresh-1-n\',{\'id_tag\':value.id_tag,\'command\':\'set_external_pressure\',\'val\':101.325},null,\'linkOn\')}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t\t<div class=\"statusLabelWide\">Internal pressure target:</div>\n\t\t\t\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t\t\t\t{{:helper.precisionRound(value.internal,4)}} kPa\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t{{:helper.link(\'Set\',\'gear\',{\'id_tag\':value.id_tag,\'command\':\'set_internal_pressure\'})}}\n\t\t\t\t\t\t\t\t{{:helper.link(\'Reset\',\'arrowrefresh-1-n\',{\'id_tag\':value.id_tag,\'command\':\'set_internal_pressure\',\'val\':0},null,\'linkOn\')}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{{empty}}\n\t\t\t\t\t\t<i>No scrubbers located in this area.</i>\n\t\t\t\t\t{{/for}}\n\t\t\t\t<!-- MODES -->\n\t\t\t\t{{else data.screen == 4}}\n\t\t\t\t\t<h3>System Mode</h3>\n\t\t\t\t\t<div class=\"statusDisplay\">\n\t\t\t\t\t\t{{for data.modes}}\n\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t<div class=\"statusLabel\">{{:helper.link(value.name,\'gear\',{\'mode\':index+1},null,(index+1==data.mode?\'linkOn\':\'\'))}}</div>\n\t\t\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t\t\t{{:value.desc}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<h3>System Preset</h3>\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\tCycle after changing preset\n\t\t\t\t\t\t{{if data.cycle_after_preset}}\n\t\t\t\t\t\t\t{{:helper.link(\'Yes\', null, {\'toggle_cycle_after_preset\':1}, null, \'greenBackground\')}}\n\t\t\t\t\t\t{{else}}\n\t\t\t\t\t\t\t{{:helper.link(\'No\', null, {\'toggle_cycle_after_preset\':1}, null, \'redBackground\')}}\n\t\t\t\t\t\t{{/if}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"statusDisplay\">\n\t\t\t\t\t\t{{for data.presets}}\n\t\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t\t<div class=\"statusLabel\">{{:helper.link(value.name,\'gear\',{\'preset\':value.name},null,(value.name==data.preset?\'linkOn\':\'\'))}}</div>\n\t\t\t\t\t\t\t<div class=\"statusValue\">\n\t\t\t\t\t\t\t\t{{:value.desc}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t</div>\n\t\t\t\t<!-- SENSORS -->\n\t\t\t\t{{else data.screen == 5}}\n\t\t\t\t\t<h3>Sensor Thresholds</h3>\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t\t{{:helper.link(\"Reset\", \"arrowreturn-1-w\", {\'reset_thresholds\':1})}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"statusDisplay\">\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t\t<th>&nbsp;</th>\n\t\t\t\t\t\t\t\t<th class=\"bad\">min2</th>\n\t\t\t\t\t\t\t\t<th class=\"average\">min1</th>\n\t\t\t\t\t\t\t\t<th class=\"average\">max1</th>\n\t\t\t\t\t\t\t\t<th class=\"bad\">max2</th>\n\t\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>O<sub>2</sub></th>\n\t\t\t\t\t\t\t\t\t{{for data.sensors.oxygen}}\n\t\t\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'command\':\'set_threshold\',\'env\':\'oxygen\',\'var\':index+1})}}</td>\n\t\t\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>N<sub>2</sub></th>\n\t\t\t\t\t\t\t\t\t{{for data.sensors.nitrogen}}\n\t\t\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'command\':\'set_threshold\',\'env\':\'nitrogen\',\'var\':index+1})}}</td>\n\t\t\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>CO<sub>2</sub></th>\n\t\t\t\t\t\t\t\t\t{{for data.sensors.carbon_dioxide}}\n\t\t\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'command\':\'set_threshold\',\'env\':\'carbon_dioxide\',\'var\':index+1})}}</td>\n\t\t\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>Plasma</th>\n\t\t\t\t\t\t\t\t\t{{for data.sensors.plasma}}\n\t\t\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'command\':\'set_threshold\',\'env\':\'plasma\',\'var\':index+1})}}</td>\n\t\t\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>Nitrous Oxide</th>\n\t\t\t\t\t\t\t\t\t{{for data.sensors.n2o}}\n\t\t\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'command\':\'set_threshold\',\'env\':\'n2o\',\'var\':index+1})}}</td>\n\t\t\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>Trace Gases</th>\n\t\t\t\t\t\t\t\t\t{{for data.sensors.other}}\n\t\t\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'command\':\'set_threshold\',\'env\':\'other\',\'var\':index+1})}}</td>\n\t\t\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>Pressure</th>\n\t\t\t\t\t\t\t\t\t{{for data.sensors.pressure}}\n\t\t\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'command\':\'set_threshold\',\'env\':\'pressure\',\'var\':index+1})}}</td>\n\t\t\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t<th>Temperature (K)</th>\n\t\t\t\t\t\t\t\t\t{{for data.sensors.temperature}}\n\t\t\t\t\t\t\t\t\t\t<td>{{:helper.link(value >= 0 ? helper.precisionRound(value,4) : \"OFF\",null,{\'command\':\'set_threshold\',\'env\':\'temperature\',\'var\':index+1})}}</td>\n\t\t\t\t\t\t\t\t\t{{/for}}\n\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</div>\n\t\t\t\t{{/if}}\n\t\t\t{{/if}}\n\t\t{{/if}}\n\t{{/if}}\n{{/if}}");