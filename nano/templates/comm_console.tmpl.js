NanoTemplate.preloadTemplate("comm_console.tmpl", "<!-- \nTitle: Communications\nUsed In File(s): /code/game/machinery/computers/communications.dm\n-->\n<!--\n#define COMM_SCREEN_MAIN\t\t1\n#define COMM_SCREEN_STAT\t\t2\n#define COMM_SCREEN_MESSAGES\t3\n#define COMM_SCREEN_SECLEVEL\t4\n#define COMM_SCREEN_ERT\t\t\t5\n-->\n{{if !data.authenticated}}\n<div class=\"notice\">Please swipe your ID card. {{:helper.link(\'Log In\',\'unlocked\',{\'operation\':\'login\'},null,\'fixed\')}}</div>\n{{else}}\n\t{{if !data.is_ai}}\n\t<div class=\"notice\">Please remember to {{:helper.link(\'Log Out\',\'locked\',{\'operation\':\'logout\'},null,\'fixed\')}}</div>\n\t{{/if}}\n\t\n\t<div class=\"item\">\n\t\t<h3>Emergency Shuttle:</h3>\n\t\t{{if data.shuttle.eta}}\n\t\t\t<div class=\"itemLabel\">ETA:</div>\n\t\t\t<div class=\"itemContents\">\n\t\t\t\t{{>data.shuttle.eta}}\n\t\t\t</div>\n\t\t{{/if}}<!-- SHUTTLE ETA -->\n\t\t<div class=\"itemLabel\">Options:</div>\n\t\t<div class=\"itemContents\">\n\t\t\t{{if data.shuttle.pos == 0}}\n\t\t\t\t{{if data.shuttle.on && !data.is_ai}}\n\t\t\t\t\t{{:helper.link(\'Cancel Shuttle\',\'arrowreturnthick-1-w\',{\'operation\':\'cancelshuttle\'})}}\n\t\t\t\t{{else !data.shuttle.on}}\n\t\t\t\t\t{{:helper.link(\'Call Shuttle\',\'arrowthickstop-1-s\',{\'operation\':\'callshuttle\'})}}\n\t\t\t\t{{/if}}\n\t\t\t{{/if}}\n\t\t\t{{:helper.link(\'Show logs\', \'note\', {\'operation\': \'ViewShuttleLog\'})}}\n\t\t</div>\n\t</div>\n\n\t{{if data.screen==1}}\n\t\t<!-- MAIN SCREEN -->\n\t\t<h3>Menu</h3>\n\t\t<div class=\"item\">\n\t\t\t{{if data.authenticated==2}}\n\t\t\t\t<div class=\"line\">\n\t\t\t\t\t{{:helper.link(\'Make an Announcement\',\'alert\',{\'operation\':\'announce\'})}}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"line\">\n\t\t\t\t{{if data.emagged}}\n\t\t\t\t\t{{:helper.link(\'Message [UNKNOWN]\',\'mail-closed\',{\'operation\':\'MessageSyndicate\'})}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"line\">\n\t\t\t\t\t{{:helper.link(\'Reset Relays\',\'refresh\',{\'operation\':\'RestoreBackup\'})}}\n\t\t\t\t{{else}}\n\t\t\t\t\t{{:helper.link(\'Message CentComm\',\'mail-closed\',{\'operation\':\'MessageCentcomm\'})}}\n\t\t\t\t{{/if}}\n\t\t\t\t</div>\n\t\t\t{{/if}}\n\t\t\t<div class=\"line\">\n\t\t\t\t{{:helper.link(\'Change Alert Level\',\'signal-diag\',{\'operation\':\'changeseclevel\'})}}\n\t\t\t</div>\n\t\t\t<div class=\"line\">\n\t\t\t\t{{:helper.link(\'Change Status Displays\',\'info\',{\'operation\':\'status\'})}}\n\t\t\t</div>\n\t\t\t<div class=\"line\">\n\t\t\t\t{{:helper.link(\'Message List\',\'comment\',{\'operation\':\'messagelist\'})}}\n\t\t\t</div>\n\t\t\t<div class=\"line\">\n\t\t\t\t{{if data.portopen}}\n\t\t\t\t\t{{:helper.link(\'Close Trader Port\',\'key\',{\'operation\':\'SetPortRestriction\'},null,\'redBackground\')}}\n\t\t\t\t{{else}}\n\t\t\t\t\t{{:helper.link(\'Open Trader Port\',\'key\',{\'operation\':\'SetPortRestriction\'},null,\'linkOn\')}}\n\t\t\t\t{{/if}}\n\t\t\t</div>\n\t\t\t{{if data.str_security_level == \"red\" || data.str_security_level == \"delta\"}}\n\t\t\t\t<div class=\"line\">\n\t\t\t\t\t{{:helper.link(\'Request Response Team\',\'alert\',{\'operation\':\'emergency_screen\'})}}\n\t\t\t\t</div>\n\t\t\t{{/if}}\n\t\t</div>\n\t{{else data.screen==2}}\n\t\t<!-- STATUS DISPLAYS -->\n\t\t<h2>Status Displays</h2>\n\t\t{{:helper.link(\'Back\',\'home\',{\'operation\':\'main\'})}}\n\t\t<h3>Presets</h3>\n\t\t{{for data.stat_display.presets}}\n\t\t\t<div class=\"line\">\n\t\t\t\t<div class=\"statusLabel\">{{:helper.link(value.label,\'info\',{\'operation\':\'setstat\',\'statdisp\':name},null,(name==data.stat_display.type?\'linkOn\':\'\'))}}</div>\n\t\t\t</div>\n\t\t{{/for}}\n\t\t<h3>Alerts</h3>\n\t\t{{for data.stat_display.alerts}}\n\t\t\t<div class=\"line\">\n\t\t\t\t<div class=\"statusLabel\">{{:helper.link(value.label,\'alert\',{\'operation\':\'setstat\',\'statdisp\':\'alert\',\'alert\':alert},null,(name==data.stat_display.type?\'linkOn\':\'\'))}}</div>\n\t\t\t</div>\n\t\t{{/for}}\n\t\t<h3>Messages</h3>\n\t\t<div class=\"item\">\n\t\t\t{{if data.stat_display.type}}\n\t\t\t<div class=\"line\">\n\t\t\t\t<div class=\"statusLabel\">{{:helper.link(\'Line 1:\',\'gear\',{\'operation\':\'setmsg1\'})}}</div>\n\t\t\t\t<div class=\"statusValue\">{{>data.stat_display.line_1}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"line\">\n\t\t\t\t<div class=\"statusLabel\">{{:helper.link(\'Line 2:\',\'gear\',{\'operation\':\'setmsg2\'})}}</div>\n\t\t\t\t<div class=\"statusValue\">{{>data.stat_display.line_2}}</div>\n\t\t\t</div>\n\t\t\t{{/if}}\n\t\t</div>\n\t{{else data.screen==3}}\n\t\t<!-- MESSAGES -->\n\t\t<h3>Messages</h3>\n\t\t{{if data.current_message}}\n\t\t\t{{for data.messages}}\n\t\t\t\t{{if value.id == data.current_message}}\n\t\t\t\t\t{{:helper.link(\'Messages\',\'home\',{\'operation\':\'messagelist\'})}}\n\t\t\t\t\t<h3>{{>value.title}}</h3>\n\t\t\t\t\t<div class=\"item\">\n\t\t\t\t\t\t{{>value.body}}\n\t\t\t\t\t</div>\n\t\t\t\t{{/if}}\n\t\t\t{{/for}}\n\t\t{{else}}\n\t\t\t{{:helper.link(\'Back\',\'home\',{\'operation\':\'main\'})}}\n\t\t\t{{for data.messages}}\n\t\t\t\t<div class=\"line\">\n\t\t\t\t\t{{:helper.link(\'Open\',\'mail-open\',{\'operation\':\'messagelist\',\'msgid\':value.id})}}\n\t\t\t\t\t{{:helper.link(\'Delete\',\'close\',{\'operation\':\'delmessage\',\'msgid\':value.id},null,\'red\')}}\n\t\t\t\t\t{{>value.title}}\n\t\t\t\t</div>\n\t\t\t{{/for}}\n\t\t{{/if}}\n\t{{else data.screen==4}}\n\t\t<!-- ALERT LEVEL -->\n\t\t<h3>Security Level</h3>\n\t\t{{:helper.link(\'Back\',\'home\',{\'operation\':\'main\'})}}\n\t\t<div class=\"item\">\n\t\t\t<div class=\"line\">\n\t\t\t\t<div class=\"itemLabel\">Security Level:</div>\n\t\t\t\t<div class=\"itemContents {{:data.str_security_level}}\">{{>data.str_security_level}}</div>\n\t\t\t</div>\n\t\t\t<div class=\"line\">\n\t\t\t\t<div class=\"itemLabel\">Presets:</div>\n\t\t\t\t<div class=\"itemContents\">\n\t\t\t\t\t{{for data.levels}}\n\t\t\t\t\t\t{{:helper.link(value.name,\'comment\',{\'operation\':\'newalertlevel\',\'level\':value.id},null,(value.id==data.security_level?\'linkOn\':\'\'))}}\n\t\t\t\t\t{{/for}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{{else data.screen == 5}}\n\t\t<!-- ERT REQUEST -->\n\t\t<h3>Emergency Response Team</h3>\n\t\t{{:helper.link(\'Back\',\'home\',{\'operation\':\'main\'})}}\n\t\t<div class=\"item\">\n\t\t\t{{if data.ert_sent == 1}}\n\t\t\t\t<h2>ERT Enroute</h2>\n\t\t\t{{/if}}\n\t\t\t<div class=\"line\">\n\t\t\t\t<div class=\"itemLabel\">Security Level:</div>\n\t\t\t\t<div class=\"itemContents {{:data.str_security_level}}\">{{>data.str_security_level}}</div>\n\t\t\t</div>\n\t\t\t{{:helper.link(\'Request Emergency Response Team\',\'comment\',{\'operation\':\'request_emergency_team\'},null,(data.ert_sent==1?\'linkOff\':\'\'))}}\n\t\t</div>\n\t{{else data.screen == 6}}\n\t\t<!-- SHUTTLE LOG -->\n\t\t<h3>Emergency shuttle log</h3>\n\t\t{{:helper.link(\'Back\', \'home\', {\'operation\': \'main\'})}}\n\t\t<div class=\"item\">\n\t\t\t<div class=\"line\">\n\t\t\t\t<div class=\"itemLabel\">\n\t\t\t\t\tHistory:\n\t\t\t\t</div>\n\t\t\t\t<div class=\"itemContents\">\n\t\t\t\t\t{{for data.shuttle_log}}\n\t\t\t\t\t\t<br>{{>value.text}}\n\t\t\t\t\t{{/for}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{{/if}}<!-- SCREEN -->\n{{/if}}<!-- AUTHENTICATED -->");